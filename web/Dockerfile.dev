# Development Dockerfile for GodJira Frontend
# This Dockerfile is optimized for local development with hot-reload support
# It does NOT use multi-stage builds for faster iteration

FROM node:20-alpine

# Install pnpm globally
RUN npm install -g pnpm@9

# Install development tools
RUN apk add --no-cache \
    git \
    curl \
    bash

# Set working directory
WORKDIR /app

# Copy package files
COPY package.json ./
# Copy lockfile if it exists (optional for development)
COPY pnpm-lock.yaml* ./

# Install ALL dependencies (including devDependencies)
RUN pnpm install

# Copy application source
# Note: In docker-compose.dev.yml, this will be overridden by volume mount
# for hot-reload functionality
COPY . .

# Expose Vite dev server port
EXPOSE 5173

# Set environment variables for Vite
ENV HOST=0.0.0.0
ENV PORT=5173

# Start Vite development server
# The --host 0.0.0.0 flag allows access from outside the container
CMD ["pnpm", "dev", "--host", "0.0.0.0"]
